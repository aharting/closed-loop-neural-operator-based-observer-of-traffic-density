Bootstrap: docker

From: quay.io/condaforge/miniforge3:25.3.0-3



%labels

    Author YourName

    Version 1.0


%files

    requirements_small.txt


%environment

    # Ensure Conda is in PATH

    export PATH=/opt/conda/bin:$PATH



%post

    # Update conda

    conda update -y -n base -c defaults conda



    # Create Python 3.8.10 environment with some common packages

    conda create -y -n py38 python=3.8.10
    /opt/conda/bin/conda install -y -n py38 --file=requirements_small.txt
    /opt/conda/bin/conda install -y -n py38 pytorch-gpu torchvision torchaudio -c pytorch
    conda install pytorch torchvision torchaudio pytorch-cuda=11.7 -c pytorch -c nvidia

    
    # Clean up package cache

    conda clean -afy
